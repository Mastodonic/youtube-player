!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lazy-youtube-player.js",[],t):"object"==typeof exports?exports["lazy-youtube-player.js"]=t():e["lazy-youtube-player.js"]=t()}(this,function(){return function(e){function t(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,o){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),a=i(1),d=o(a),u=i(2),c=o(u),l=i(3),p=o(l);i(4),i(5);var h=function(){function e(t){if(s(this,e),this.setOptions(t),this.setDomNode(),this.setVideoId(),!this.options.videoId)throw new Error("can not find youtube video id");this.setCoverImage(),this.setMarkup(),this.createPlayerHtml(),this.initDataBindings(),this.setStates(),this.addListeners(),this.loadYoutubeApi(),!this.options.forceCoverOnTouchDevices&&p.default.isMobile.any()?this.coverIsHidden=!0:this.coverIsHidden=!1,window.YTPlayers||(window.YTPlayers=[]),window.YTPlayers.push(this)}return n(e,[{key:"setStates",value:function(){this.isLoading=!1,this.playerCreated=!1,this.videoStarted=!1}},{key:"initDataBindings",value:function(){var e=this.options.cssClasses.wrapper;this.bindClassToProperty(this,this.domNode,e+"--is-loading","isLoading"),this.bindClassToProperty(this,this.domNode,e+"--cover-is-hidden","coverIsHidden"),this.bindClassToProperty(this,this.domNode,e+"--is-ready","apiIsLoaded"),this.bindAttrToProperty(this.options,this.domNode.querySelector("."+this.options.cssClasses.cover),"style","coverImage")}},{key:"bindClassToProperty",value:function(e,t,i,o){Object.defineProperty(e,o,{get:function(){},set:function(e){e?t.classList.add(i):t.classList.remove(i)}})}},{key:"bindAttrToProperty",value:function(e,t,i,o){Object.defineProperty(e,o,{get:function(){},set:function(e){e&&t.setAttribute(i,e)}})}},{key:"setOptions",value:function(e){this.options=r({},d.default,e)}},{key:"setDomNode",value:function(){this.domNode=this.options.element}},{key:"createPlayerHtml",value:function(){this.domNode.innerHTML=this.markup,this.domNode=this.domNode.firstChild}},{key:"extractVideoIdfromUrl",value:function(){var e=/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^?&"'>]+)/,t=this.options.videoUrl.match(e);if(!t)throw new Error("The url is not in the right format");this.options.videoId=t[1]}},{key:"setVideoId",value:function(){this.domNode.hasAttribute("data-youtube-id")&&(this.options.videoId=this.domNode.getAttribute("data-youtube-id")),this.domNode.hasAttribute("data-youtube-url")&&(this.options.videoUrl=this.domNode.getAttribute("data-youtube-url")),this.options.videoUrl&&!this.options.videoId&&this.extractVideoIdfromUrl()}},{key:"setCoverImage",value:function(){var e=this;if(this.domNode.hasAttribute("data-cover-image")&&(this.options.coverImageSrc=this.domNode.getAttribute("data-cover-image")),this.options.coverImageSrc){var t=new Image;t.src=this.options.coverImageSrc,t.onload=function(){e.options.coverImage="background-image: url("+e.options.coverImageSrc}}else{var i=new Image,o=void 0,s=void 0;switch(this.options.coverImageSize){case"medium":o="mqdefault";break;case"high":o="0";break;case"sd":o="sddefault";break;case"maximum":o="maxresdefault"}s="https://img.youtube.com/vi/"+this.options.videoId+"/"+o+".jpg",i.src=s,i.onload=function(){var t=i.width>150?o:"0";e.options.coverImage="background-image: url(https://img.youtube.com/vi/"+e.options.videoId+"/"+t+".jpg)"}}}},{key:"addListeners",value:function(){var e=this;this.domNode.querySelector("."+this.options.cssClasses.cover).addEventListener("click",function(){return e.initialisePlayer()})}},{key:"setMarkup",value:function(){this.markup=(0,c.default)(this.options)}},{key:"loadYoutubeApi",value:function(){var e=void 0,t=void 0;window.iframeApiCreated||(e=document.createElement("script"),e.src="https://www.youtube.com/iframe_api",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t),window.iframeApiCreated=!0),window.YT?this.onYouTubeIframeAPIReady():window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady.bind(this)}},{key:"onYouTubeIframeAPIReady",value:function(){var e=this;window.YTPlayers.forEach(function(t){t.apiIsLoaded=!0,!e.options.forceCoverOnTouchDevices&&p.default.isMobile.any()&&t.initialisePlayer()})}},{key:"initialisePlayer",value:function(){p.default.isMobile.any()?this.coverIsHidden=!0:this.isLoading=!0,this.playerCreated?this.player.playVideo():this.createPlayer(),this.pauseOtherVideos()}},{key:"createPlayer",value:function(){this.player=new YT.Player(this.options.videoId,{videoId:this.options.videoId,playerVars:this.options.playerVars,events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}})}},{key:"onPlayerReady",value:function(e){this.player.stopVideo(),this.player.playVideo(),this.playerCreated=!0}},{key:"onPlayerStateChange",value:function(e){switch(e.data){case-1:this.videoStarted=!0;break;case 0:this.coverIsHidden=!1,this.isLoading=!1,this.videoStarted=!1;break;case 1:this.coverIsHidden=!0,this.isLoading=!1,this.pauseOtherVideos();break;case 3:this.videoStarted||(this.coverIsHidden=!1,this.isLoading=!0)}}},{key:"pauseOtherVideos",value:function(){var e=this;window.YTPlayers.forEach(function(t){t.player&&t.player!==e.player&&t.player.pauseVideo()})}},{key:"updateOptions",value:function(e){this.options.videoId=e.videoId,this.options.videoUrl=e.videoUrl,this.options.coverImageSrc=e.coverImageSrc?e.coverImageSrc:"",this.options.coverImageSize=e.coverImageSize,this.domNode.querySelector("."+this.options.cssClasses.video).setAttribute("id",this.options.videoId)}},{key:"loadNewVideo",value:function(e){this.updateOptions(e),this.setVideoId(),this.setCoverImage(),this.playerCreated&&(this.player.cueVideoById(this.options.videoId),this.isLoading=!1,this.videoStarted=!1,p.default.isMobile.any()||(this.coverIsHidden=!1))}},{key:"destroy",value:function(){if(window.YTPlayers){var e=window.YTPlayers.indexOf(this);e>-1&&window.YTPlayers.splice(e,1)}this.domNode.remove()}}]),e}();t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={element:null,videoId:"",videoUrl:"",coverImageSrc:"",coverImageSize:"high",forceCoverOnTouchDevices:!1,cssClasses:{wrapper:"c-youtube-player",wrapperInner:"c-youtube-player__inner",video:"c-youtube-player__video",cover:"c-youtube-player__cover",icons:"c-youtube-player__icons",spinnerWrapper:"c-youtube-player__spinner-wrapper",playButtonWrapper:"c-youtube-player__play-button-wrapper"},playIcon:'<svg class="c-youtube-player__play-button" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 300 300" xml:space="preserve"><path d="M281.9,144.5L24.5,1.4c-3-1.7-5.5-1.9-7.7-0.6c-2.1,1.3-3.2,3.6-3.2,7v285.3c0,3.4,1.1,5.7,3.2,7c2.1,1.3,4.7,1.1,7.7-0.6l257.4-143c3-1.7,4.5-3.7,4.5-6C286.3,148.1,284.9,146.1,281.9,144.5L281.9,144.5z"></path></svg>',spinnerIcon:'<div class="c-youtube-player__spinner"></div>',playerVars:{rel:0,color:"white",showinfo:0,modestbranding:1,iv_load_policy:3,disablekb:1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<div class="'+e.cssClasses.wrapper+'">\n        <div class="'+e.cssClasses.wrapperInner+'">\n            <div id="'+e.videoId+'" class="'+e.cssClasses.video+'"></div>\n            <div class="'+e.cssClasses.cover+'">\n                <div class="'+e.cssClasses.icons+'">\n                    <div class="'+e.cssClasses.playButtonWrapper+'">\n                        '+e.playIcon+'\n                    </div>\n                    <div class="'+e.cssClasses.spinnerWrapper+'">\n                        '+e.spinnerIcon+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getEl:function(e){return document.querySelectorAll(e)},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}}},function(e,t){},function(e,t){}])});